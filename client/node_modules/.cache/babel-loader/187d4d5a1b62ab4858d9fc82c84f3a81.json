{"ast":null,"code":"var _jsxFileName = \"/home/hei/Documents/finals/JEK/client/src/components/Home/Channel/Modules/Photos/AlbumForm.js\";\nimport React, { useState } from 'react';\nimport { LinearProgress } from '@material-ui/core';\nimport { handleFiles } from './Scripts/DragAndDropPhotos';\nexport default function AlbumForm({\n  channelId,\n  emitSendMessage,\n  albumName,\n  newAlbum,\n  viewAlbum\n}) {\n  const [fields, changeFields] = useState({\n    album: albumName,\n    files: [],\n    originalName: albumName\n  });\n  const [showProgress, toggleProgress] = useState(false);\n\n  function previewFile(file) {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onloadend = function () {\n      let img = document.createElement('img');\n\n      if (file.type === 'video/mp4') {\n        img = document.createElement('video');\n      }\n\n      img.src = reader.result;\n      document.getElementById('input-display').appendChild(img);\n    };\n  } // Handles form events when adding files and\n  // creating a name\n\n\n  function handleOnChange(event) {\n    event.preventDefault();\n\n    if (event.target.name === 'album') {\n      const value = event.target.value.replace(/ /g, '-');\n      changeFields({ ...fields,\n        [event.target.name]: value,\n        originalName: event.target.value\n      });\n    } else {\n      [...event.target.files].forEach(previewFile);\n      changeFields({\n        album: fields.album,\n        files: [...fields.files, event.target.files]\n      });\n    }\n  }\n\n  function viewUpdatedAlbum() {\n    const pathName = albumName.replace(/ /g, '-');\n    console.log(pathName);\n    viewAlbum(`${channelId}/albums/${pathName}`, albumName);\n  }\n\n  function viewAlbums() {\n    viewAlbum('albums');\n  }\n\n  async function handleSubmit(event) {\n    toggleProgress(true);\n    event.preventDefault();\n    [...fields.files].forEach(file => {\n      if (!newAlbum) {\n        handleFiles(file, channelId, fields.album, emitSendMessage, viewUpdatedAlbum);\n      } else {\n        handleFiles(file, channelId, fields.album, emitSendMessage, viewAlbums);\n      }\n\n      setTimeout(() => {\n        toggleProgress(false);\n      }, 3000);\n    });\n    document.getElementById('album-upload-form').reset();\n    let message = `ðŸš¨A new album '${fields.album.replace(/-/g, ' ')}' has been uploadedðŸš¨`;\n\n    if (!newAlbum) {\n      message = `ðŸ‘€ New photos were added to ${fields.album}`;\n    } else {\n      setTimeout(() => viewAlbum('albums'), 3000);\n    }\n\n    setTimeout(() => emitSendMessage(message, false, false), 3000);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, showProgress && React.createElement(LinearProgress, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), newAlbum && React.createElement(\"div\", {\n    className: \"popup-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"New Album\"), !newAlbum && React.createElement(\"div\", {\n    className: \"popup-title-mod\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Adding photos to\", ' ', albumName), React.createElement(\"form\", {\n    id: \"album-upload-form\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, newAlbum && React.createElement(\"input\", {\n    id: \"input-album\",\n    type: \"text\",\n    name: \"album\",\n    placeholder: \"Choose an album name\",\n    onChange: handleOnChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"album-submission\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"submit-button\",\n    type: \"submit\",\n    value: \"SUBMIT\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    id: \"input-display\",\n    value: \"drag\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    id: \"album-upload\",\n    name: \"files\",\n    type: \"file\",\n    multiple: true,\n    accept: \"image/*\",\n    onChange: handleOnChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"subtitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"ADDED MEDIA:\"))));\n}","map":{"version":3,"sources":["/home/hei/Documents/finals/JEK/client/src/components/Home/Channel/Modules/Photos/AlbumForm.js"],"names":["React","useState","LinearProgress","handleFiles","AlbumForm","channelId","emitSendMessage","albumName","newAlbum","viewAlbum","fields","changeFields","album","files","originalName","showProgress","toggleProgress","previewFile","file","reader","FileReader","readAsDataURL","onloadend","img","document","createElement","type","src","result","getElementById","appendChild","handleOnChange","event","preventDefault","target","name","value","replace","forEach","viewUpdatedAlbum","pathName","console","log","viewAlbums","handleSubmit","setTimeout","reset","message"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { LinearProgress } from '@material-ui/core';\nimport { handleFiles } from './Scripts/DragAndDropPhotos';\n\n\nexport default function AlbumForm({\n  channelId, emitSendMessage, albumName, newAlbum, viewAlbum,\n}) {\n  const [fields, changeFields] = useState(\n    {\n      album: albumName,\n      files: [],\n      originalName: albumName,\n    },\n  );\n  const [showProgress, toggleProgress] = useState(false);\n\n  function previewFile(file) {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = function () {\n      let img = document.createElement('img');\n      if (file.type === 'video/mp4') {\n        img = document.createElement('video');\n      }\n      img.src = reader.result;\n      document.getElementById('input-display').appendChild(img);\n    };\n  }\n\n  // Handles form events when adding files and\n  // creating a name\n  function handleOnChange(event) {\n    event.preventDefault();\n    if (event.target.name === 'album') {\n      const value = event.target.value.replace(/ /g, '-');\n      changeFields({\n        ...fields,\n        [event.target.name]: value,\n        originalName: event.target.value,\n      });\n    } else {\n      [...event.target.files].forEach(previewFile);\n      changeFields({\n        album: fields.album,\n        files: [...fields.files, event.target.files],\n      });\n    }\n  }\n\n  function viewUpdatedAlbum() {\n    const pathName = albumName.replace(/ /g, '-');\n    console.log(pathName)\n    viewAlbum(`${channelId}/albums/${pathName}`, albumName);\n  }\n\n  function viewAlbums() {\n    viewAlbum('albums');\n  }\n\n  async function handleSubmit(event) {\n    toggleProgress(true);\n    event.preventDefault();\n    [...fields.files].forEach((file) => {\n      if (!newAlbum) {\n        handleFiles(file, channelId, fields.album, emitSendMessage, viewUpdatedAlbum);\n      } else {\n        handleFiles(file, channelId, fields.album, emitSendMessage, viewAlbums);\n      }\n      setTimeout(() => {\n        toggleProgress(false);\n      }, 3000);\n    });\n    document.getElementById('album-upload-form').reset();\n    let message = `ðŸš¨A new album '${fields.album.replace(/-/g, ' ')}' has been uploadedðŸš¨`;\n    if (!newAlbum) {\n      message = `ðŸ‘€ New photos were added to ${fields.album}`;\n    } else {\n      setTimeout(() => viewAlbum('albums'), 3000);\n    }\n    setTimeout(() => emitSendMessage(message, false, false), 3000);\n  }\n\n  return (\n    <div>\n      { showProgress && <LinearProgress /> }\n      { newAlbum && <div className=\"popup-title\">New Album</div> }\n      { !newAlbum && (\n      <div className=\"popup-title-mod\">\n        Adding photos to\n        {' '}\n        {albumName}\n      </div>\n      )}\n      <form id=\"album-upload-form\" onSubmit={handleSubmit}>\n        { newAlbum && (\n          <input id=\"input-album\" type=\"text\" name=\"album\" placeholder=\"Choose an album name\" onChange={handleOnChange} />\n        )}\n        <div id=\"album-submission\"><input className=\"submit-button\" type=\"submit\" value=\"SUBMIT\" /></div>\n        <div id=\"input-display\" value=\"drag\">\n          <input\n            id=\"album-upload\"\n            name=\"files\"\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            onChange={handleOnChange}\n          />\n          <div className=\"subtitle\">ADDED MEDIA:</div>\n        </div>\n      </form>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}