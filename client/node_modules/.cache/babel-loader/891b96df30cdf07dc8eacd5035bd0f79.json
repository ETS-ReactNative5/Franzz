{"ast":null,"code":"const {\n  serverURL\n} = require('../../../../../../utils/config');\n\nconst preventDefaults = e => {\n  e.preventDefault();\n  e.stopPropagation();\n};\n\nconst uploadFile = async (file, channelId, albumName, emitSendMessage, viewUpdatedAlbum) => {\n  const url = 'https://arcane-bastion-72484.herokuapp.com/api/photos/uploadPhotos';\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('channel', `${channelId}`);\n  let path = `albums/${albumName.replace(/ /g, '-')}`;\n\n  if (albumName === 'chat') {\n    path = 'chat';\n  }\n\n  formData.append('album', path);\n  fetch(url, {\n    method: 'POST',\n    body: formData\n  }) // send the url of image/video to socket to be used for messaging\n  .then(res => res.json()).then(data => {\n    if (albumName === 'chat') {\n      emitSendMessage(data.result.url, data.video, data.image);\n    } else {\n      setTimeout(() => {\n        viewUpdatedAlbum();\n      }, 3000);\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst handleFiles = (files, channelId, albumName, emitSendMessage, viewUpdatedAlbum) => {\n  [...files].forEach(file => {\n    uploadFile(file, channelId, albumName, emitSendMessage, viewUpdatedAlbum);\n  });\n};\n\nconst handleDrop = (e, channelId, albumName, emitSendMessage) => {\n  // get emitsendmessage to be passed through as a function\n  preventDefaults(e);\n  const dt = e.dataTransfer;\n  const {\n    files\n  } = dt;\n  handleFiles(files, channelId, albumName, emitSendMessage);\n};\n\nmodule.exports = {\n  preventDefaults,\n  handleDrop,\n  handleFiles\n};","map":{"version":3,"sources":["/home/hei/Documents/finals/JEK/client/src/components/Home/Channel/Modules/Photos/Scripts/DragAndDropPhotos.js"],"names":["serverURL","require","preventDefaults","e","preventDefault","stopPropagation","uploadFile","file","channelId","albumName","emitSendMessage","viewUpdatedAlbum","url","formData","FormData","append","path","replace","fetch","method","body","then","res","json","data","result","video","image","setTimeout","catch","err","console","log","handleFiles","files","forEach","handleDrop","dt","dataTransfer","module","exports"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAgBC,OAAO,CAAC,gCAAD,CAA7B;;AAEA,MAAMC,eAAe,GAAIC,CAAD,IAAO;AAC7BA,EAAAA,CAAC,CAACC,cAAF;AACAD,EAAAA,CAAC,CAACE,eAAF;AACD,CAHD;;AAKA,MAAMC,UAAU,GAAG,OAAOC,IAAP,EAAaC,SAAb,EAAwBC,SAAxB,EAAmCC,eAAnC,EAAoDC,gBAApD,KAAyE;AAC1F,QAAMC,GAAG,GAAG,oEAAZ;AACA,QAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,EAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBR,IAAxB;AACAM,EAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA4B,GAAEP,SAAU,EAAxC;AACA,MAAIQ,IAAI,GAAI,UAASP,SAAS,CAACQ,OAAV,CAAkB,IAAlB,EAAwB,GAAxB,CAA6B,EAAlD;;AACA,MAAIR,SAAS,KAAK,MAAlB,EAA0B;AACxBO,IAAAA,IAAI,GAAG,MAAP;AACD;;AACDH,EAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBC,IAAzB;AAGAE,EAAAA,KAAK,CAACN,GAAD,EAAM;AACTO,IAAAA,MAAM,EAAE,MADC;AAETC,IAAAA,IAAI,EAAEP;AAFG,GAAN,CAAL,CAIE;AAJF,GAKGQ,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,EAMGF,IANH,CAMSG,IAAD,IAAU;AACd,QAAIf,SAAS,KAAK,MAAlB,EAA0B;AACxBC,MAAAA,eAAe,CAACc,IAAI,CAACC,MAAL,CAAYb,GAAb,EAAkBY,IAAI,CAACE,KAAvB,EAA8BF,IAAI,CAACG,KAAnC,CAAf;AACD,KAFD,MAEO;AACLC,MAAAA,UAAU,CAAC,MAAM;AACfjB,QAAAA,gBAAgB;AACjB,OAFS,EAEP,IAFO,CAAV;AAGD;AACF,GAdH,EAeGkB,KAfH,CAeUC,GAAD,IAAS;AAAEC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AAAmB,GAfvC;AAgBD,CA5BD;;AA8BA,MAAMG,WAAW,GAAG,CAACC,KAAD,EAAQ1B,SAAR,EAAmBC,SAAnB,EAA8BC,eAA9B,EAA+CC,gBAA/C,KAAoE;AACtF,GAAC,GAAGuB,KAAJ,EAAWC,OAAX,CAAoB5B,IAAD,IAAU;AAC3BD,IAAAA,UAAU,CAACC,IAAD,EAAOC,SAAP,EAAkBC,SAAlB,EAA6BC,eAA7B,EAA8CC,gBAA9C,CAAV;AACD,GAFD;AAGD,CAJD;;AAMA,MAAMyB,UAAU,GAAG,CAACjC,CAAD,EAAIK,SAAJ,EAAeC,SAAf,EAA0BC,eAA1B,KAA8C;AAC/D;AACAR,EAAAA,eAAe,CAACC,CAAD,CAAf;AACA,QAAMkC,EAAE,GAAGlC,CAAC,CAACmC,YAAb;AACA,QAAM;AAAEJ,IAAAA;AAAF,MAAYG,EAAlB;AAEAJ,EAAAA,WAAW,CAACC,KAAD,EAAQ1B,SAAR,EAAmBC,SAAnB,EAA8BC,eAA9B,CAAX;AACD,CAPD;;AASA6B,MAAM,CAACC,OAAP,GAAiB;AACftC,EAAAA,eADe;AAEfkC,EAAAA,UAFe;AAGfH,EAAAA;AAHe,CAAjB","sourcesContent":["const { serverURL } = require('../../../../../../utils/config');\n\nconst preventDefaults = (e) => {\n  e.preventDefault();\n  e.stopPropagation();\n};\n\nconst uploadFile = async (file, channelId, albumName, emitSendMessage, viewUpdatedAlbum) => {\n  const url = 'https://arcane-bastion-72484.herokuapp.com/api/photos/uploadPhotos';\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('channel', `${channelId}`);\n  let path = `albums/${albumName.replace(/ /g, '-')}`;\n  if (albumName === 'chat') {\n    path = 'chat';\n  }\n  formData.append('album', path);\n\n\n  fetch(url, {\n    method: 'POST',\n    body: formData,\n  })\n    // send the url of image/video to socket to be used for messaging\n    .then((res) => res.json())\n    .then((data) => {\n      if (albumName === 'chat') {\n        emitSendMessage(data.result.url, data.video, data.image);\n      } else {\n        setTimeout(() => {\n          viewUpdatedAlbum();\n        }, 3000);\n      }\n    })\n    .catch((err) => { console.log(err); });\n};\n\nconst handleFiles = (files, channelId, albumName, emitSendMessage, viewUpdatedAlbum) => {\n  [...files].forEach((file) => {\n    uploadFile(file, channelId, albumName, emitSendMessage, viewUpdatedAlbum);\n  });\n};\n\nconst handleDrop = (e, channelId, albumName, emitSendMessage) => {\n  // get emitsendmessage to be passed through as a function\n  preventDefaults(e);\n  const dt = e.dataTransfer;\n  const { files } = dt;\n\n  handleFiles(files, channelId, albumName, emitSendMessage);\n};\n\nmodule.exports = {\n  preventDefaults,\n  handleDrop,\n  handleFiles,\n};\n"]},"metadata":{},"sourceType":"module"}