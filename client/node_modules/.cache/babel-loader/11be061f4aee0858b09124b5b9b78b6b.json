{"ast":null,"code":"function preventDefaults(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nasync function uploadFile(file, channelId, albumName, emitSendMessage, viewUpdatedAlbum) {\n  const url = 'http://localhost:8001/api/photos/uploadPhotos';\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('channel', `${channelId}`);\n  let path = `albums/${albumName}`;\n\n  if (albumName === 'chat') {\n    path = 'chat';\n  }\n\n  formData.append('album', path);\n  fetch(url, {\n    method: 'POST',\n    body: formData\n  }) // send the url of image/video to socket to be used for messaging\n  .then(res => res.json()).then(data => {\n    if (albumName === 'chat') {\n      emitSendMessage(data.result.url, data.video, data.image);\n    } else {\n      setTimeout(() => {\n        viewUpdatedAlbum();\n      }, 3000);\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n}\n\nfunction handleFiles(files, channelId, albumName, emitSendMessage, viewUpdatedAlbum) {\n  [...files].forEach(file => {\n    uploadFile(file, channelId, albumName, emitSendMessage, viewUpdatedAlbum);\n\n    if (albumName !== 'chat') {}\n  });\n}\n\nfunction handleDrop(e, channelId, albumName, emitSendMessage) {\n  // get emitsendmessage to be passed through as a function\n  preventDefaults(e);\n  const dt = e.dataTransfer;\n  const {\n    files\n  } = dt;\n  handleFiles(files, channelId, albumName, emitSendMessage);\n}\n\nmodule.exports = {\n  preventDefaults,\n  handleDrop,\n  handleFiles\n};","map":{"version":3,"sources":["/home/hei/Documents/finals/JEK/client/src/components/Home/Channel/Modules/Photos/Scripts/DragAndDropPhotos.js"],"names":["preventDefaults","e","preventDefault","stopPropagation","uploadFile","file","channelId","albumName","emitSendMessage","viewUpdatedAlbum","url","formData","FormData","append","path","fetch","method","body","then","res","json","data","result","video","image","setTimeout","catch","err","console","log","handleFiles","files","forEach","handleDrop","dt","dataTransfer","module","exports"],"mappings":"AAAA,SAASA,eAAT,CAAyBC,CAAzB,EAA4B;AAC1BA,EAAAA,CAAC,CAACC,cAAF;AACAD,EAAAA,CAAC,CAACE,eAAF;AACD;;AAGD,eAAeC,UAAf,CAA0BC,IAA1B,EAAgCC,SAAhC,EAA2CC,SAA3C,EAAsDC,eAAtD,EAAuEC,gBAAvE,EAAyF;AACvF,QAAMC,GAAG,GAAG,+CAAZ;AACA,QAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,EAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBR,IAAxB;AACAM,EAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA4B,GAAEP,SAAU,EAAxC;AACA,MAAIQ,IAAI,GAAI,UAASP,SAAU,EAA/B;;AACA,MAAIA,SAAS,KAAK,MAAlB,EAA0B;AACxBO,IAAAA,IAAI,GAAG,MAAP;AACD;;AACDH,EAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBC,IAAzB;AAGAC,EAAAA,KAAK,CAACL,GAAD,EAAM;AACTM,IAAAA,MAAM,EAAE,MADC;AAETC,IAAAA,IAAI,EAAEN;AAFG,GAAN,CAAL,CAIE;AAJF,GAKGO,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,EAMGF,IANH,CAMSG,IAAD,IAAU;AACd,QAAId,SAAS,KAAK,MAAlB,EAA0B;AACxBC,MAAAA,eAAe,CAACa,IAAI,CAACC,MAAL,CAAYZ,GAAb,EAAkBW,IAAI,CAACE,KAAvB,EAA8BF,IAAI,CAACG,KAAnC,CAAf;AACD,KAFD,MAEO;AACLC,MAAAA,UAAU,CAAC,MAAM;AACfhB,QAAAA,gBAAgB;AACjB,OAFS,EAEP,IAFO,CAAV;AAGD;AACF,GAdH,EAeGiB,KAfH,CAeUC,GAAD,IAAS;AAAEC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AAAmB,GAfvC;AAgBD;;AAED,SAASG,WAAT,CAAqBC,KAArB,EAA4BzB,SAA5B,EAAuCC,SAAvC,EAAkDC,eAAlD,EAAmEC,gBAAnE,EAAqF;AACnF,GAAC,GAAGsB,KAAJ,EAAWC,OAAX,CAAoB3B,IAAD,IAAU;AAC3BD,IAAAA,UAAU,CAACC,IAAD,EAAOC,SAAP,EAAkBC,SAAlB,EAA6BC,eAA7B,EAA8CC,gBAA9C,CAAV;;AACA,QAAIF,SAAS,KAAK,MAAlB,EAA0B,CACzB;AACF,GAJD;AAKD;;AAED,SAAS0B,UAAT,CAAoBhC,CAApB,EAAuBK,SAAvB,EAAkCC,SAAlC,EAA6CC,eAA7C,EAA8D;AAC5D;AACAR,EAAAA,eAAe,CAACC,CAAD,CAAf;AACA,QAAMiC,EAAE,GAAGjC,CAAC,CAACkC,YAAb;AACA,QAAM;AAAEJ,IAAAA;AAAF,MAAYG,EAAlB;AAEAJ,EAAAA,WAAW,CAACC,KAAD,EAAQzB,SAAR,EAAmBC,SAAnB,EAA8BC,eAA9B,CAAX;AACD;;AAGD4B,MAAM,CAACC,OAAP,GAAiB;AACfrC,EAAAA,eADe;AAEfiC,EAAAA,UAFe;AAGfH,EAAAA;AAHe,CAAjB","sourcesContent":["function preventDefaults(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\n\n\nasync function uploadFile(file, channelId, albumName, emitSendMessage, viewUpdatedAlbum) {\n  const url = 'http://localhost:8001/api/photos/uploadPhotos';\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('channel', `${channelId}`);\n  let path = `albums/${albumName}`;\n  if (albumName === 'chat') {\n    path = 'chat';\n  }\n  formData.append('album', path);\n\n\n  fetch(url, {\n    method: 'POST',\n    body: formData,\n  })\n    // send the url of image/video to socket to be used for messaging\n    .then((res) => res.json())\n    .then((data) => {\n      if (albumName === 'chat') {\n        emitSendMessage(data.result.url, data.video, data.image);\n      } else {\n        setTimeout(() => {\n          viewUpdatedAlbum();\n        }, 3000);\n      }\n    })\n    .catch((err) => { console.log(err); });\n}\n\nfunction handleFiles(files, channelId, albumName, emitSendMessage, viewUpdatedAlbum) {\n  [...files].forEach((file) => {\n    uploadFile(file, channelId, albumName, emitSendMessage, viewUpdatedAlbum);\n    if (albumName !== 'chat') {\n    }\n  });\n}\n\nfunction handleDrop(e, channelId, albumName, emitSendMessage) {\n  // get emitsendmessage to be passed through as a function\n  preventDefaults(e);\n  const dt = e.dataTransfer;\n  const { files } = dt;\n\n  handleFiles(files, channelId, albumName, emitSendMessage);\n}\n\n\nmodule.exports = {\n  preventDefaults,\n  handleDrop,\n  handleFiles,\n};\n"]},"metadata":{},"sourceType":"module"}