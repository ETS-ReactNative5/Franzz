{"ast":null,"code":"import _slicedToArray from\"/home/hei/Documents/finals/JEK/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react/prop-types */import React,{useState}from'react';import ScrollToBottom from'react-scroll-to-bottom';import{LinearProgress}from'@material-ui/core';import Message from'./Message';import'./TextContainer.css';// Scripting work for adding photos to the cloud through the text container\nimport useChangeHighlightClass from'../../../../../hooks/useHighlightClass';import{preventDefaults,handleDrop}from'../../Modules/Photos/Scripts/DragAndDropPhotos';var TextContainer=function TextContainer(_ref){var messages=_ref.messages,deleteMessage=_ref.deleteMessage,channelId=_ref.channelId,emitSendMessage=_ref.emitSendMessage,currentUser=_ref.currentUser;// Used to highlight the box when dragging photos in\nvar _useChangeHighlightCl=useChangeHighlightClass(''),highlightClass=_useChangeHighlightCl.highlightClass,changeHighlightClass=_useChangeHighlightCl.changeHighlightClass;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showProgress=_useState2[0],toggleProgress=_useState2[1];var formattedMessages=messages.map(function(msg){return React.createElement(Message,{key:msg.id,id:msg.id,message:msg.message,created:msg.created,username:msg.user.username,currentUser:currentUser,isCurrent:msg.user.id===currentUser,userId:msg.user.id,deleteMessage:deleteMessage,video:msg.video,image:msg.image});});// Changes the class depending on the event\n// and tracks event\nfunction boxEvent(e){changeHighlightClass(e.type);preventDefaults(e);}function dropFile(e){preventDefaults(e);toggleProgress(true);changeHighlightClass(e.type);handleDrop(e,channelId,'chat',emitSendMessage);setTimeout(function(){toggleProgress(false);},2000);}return React.createElement(\"div\",{onDragEnter:boxEvent,onDragLeave:boxEvent,onDragOver:boxEvent,onDrop:dropFile},React.createElement(ScrollToBottom,{id:\"drop-area\",className:\"textContainer \".concat(highlightClass)},formattedMessages),showProgress&&React.createElement(LinearProgress,null));};export default TextContainer;","map":{"version":3,"sources":["/home/hei/Documents/finals/JEK/client/src/components/Home/Channel/Container/Chat/TextContainer.js"],"names":["React","useState","ScrollToBottom","LinearProgress","Message","useChangeHighlightClass","preventDefaults","handleDrop","TextContainer","messages","deleteMessage","channelId","emitSendMessage","currentUser","highlightClass","changeHighlightClass","showProgress","toggleProgress","formattedMessages","map","msg","id","message","created","user","username","video","image","boxEvent","e","type","dropFile","setTimeout"],"mappings":"wHAAA,qCACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,cAAP,KAA2B,wBAA3B,CACA,OAASC,cAAT,KAA+B,mBAA/B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAGA,MAAO,qBAAP,CAEA;AACA,MAAOC,CAAAA,uBAAP,KAAoC,wCAApC,CACA,OAASC,eAAT,CAA0BC,UAA1B,KAA4C,gDAA5C,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAEhB,IADJC,CAAAA,QACI,MADJA,QACI,CADMC,aACN,MADMA,aACN,CADqBC,SACrB,MADqBA,SACrB,CADgCC,eAChC,MADgCA,eAChC,CADiDC,WACjD,MADiDA,WACjD,CACJ;AADI,0BAE6CR,uBAAuB,CAAC,EAAD,CAFpE,CAEIS,cAFJ,uBAEIA,cAFJ,CAEoBC,oBAFpB,uBAEoBA,oBAFpB,eAGmCd,QAAQ,CAAC,KAAD,CAH3C,wCAGGe,YAHH,eAGiBC,cAHjB,eAMJ,GAAMC,CAAAA,iBAAiB,CAAGT,QAAQ,CAACU,GAAT,CAAa,SAACC,GAAD,QACrC,qBAAC,OAAD,EACE,GAAG,CAAEA,GAAG,CAACC,EADX,CAEE,EAAE,CAAED,GAAG,CAACC,EAFV,CAGE,OAAO,CAAED,GAAG,CAACE,OAHf,CAIE,OAAO,CAAEF,GAAG,CAACG,OAJf,CAKE,QAAQ,CAAEH,GAAG,CAACI,IAAJ,CAASC,QALrB,CAME,WAAW,CAAEZ,WANf,CAOE,SAAS,CAAEO,GAAG,CAACI,IAAJ,CAASH,EAAT,GAAgBR,WAP7B,CAQE,MAAM,CAAEO,GAAG,CAACI,IAAJ,CAASH,EARnB,CASE,aAAa,CAAEX,aATjB,CAUE,KAAK,CAAEU,GAAG,CAACM,KAVb,CAWE,KAAK,CAAEN,GAAG,CAACO,KAXb,EADqC,EAAb,CAA1B,CAgBA;AACA;AACA,QAASC,CAAAA,QAAT,CAAkBC,CAAlB,CAAqB,CACnBd,oBAAoB,CAACc,CAAC,CAACC,IAAH,CAApB,CACAxB,eAAe,CAACuB,CAAD,CAAf,CACD,CAED,QAASE,CAAAA,QAAT,CAAkBF,CAAlB,CAAqB,CACnBvB,eAAe,CAACuB,CAAD,CAAf,CACAZ,cAAc,CAAC,IAAD,CAAd,CACAF,oBAAoB,CAACc,CAAC,CAACC,IAAH,CAApB,CACAvB,UAAU,CAACsB,CAAD,CAAIlB,SAAJ,CAAe,MAAf,CAAuBC,eAAvB,CAAV,CACAoB,UAAU,CAAC,UAAM,CACff,cAAc,CAAC,KAAD,CAAd,CACD,CAFS,CAEP,IAFO,CAAV,CAGD,CAGD,MACE,4BACE,WAAW,CAAEW,QADf,CAEE,WAAW,CAAEA,QAFf,CAGE,UAAU,CAAEA,QAHd,CAIE,MAAM,CAAEG,QAJV,EAME,oBAAC,cAAD,EACE,EAAE,CAAC,WADL,CAEE,SAAS,yBAAmBjB,cAAnB,CAFX,EAIGI,iBAJH,CANF,CAYGF,YAAY,EAAI,oBAAC,cAAD,MAZnB,CADF,CAgBD,CA1DD,CA4DA,cAAeR,CAAAA,aAAf","sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useState } from 'react';\nimport ScrollToBottom from 'react-scroll-to-bottom';\nimport { LinearProgress } from '@material-ui/core';\nimport Message from './Message';\n\n\nimport './TextContainer.css';\n\n// Scripting work for adding photos to the cloud through the text container\nimport useChangeHighlightClass from '../../../../../hooks/useHighlightClass';\nimport { preventDefaults, handleDrop } from '../../Modules/Photos/Scripts/DragAndDropPhotos';\n\nconst TextContainer = ({\n  messages, deleteMessage, channelId, emitSendMessage, currentUser,\n}) => {\n  // Used to highlight the box when dragging photos in\n  const { highlightClass, changeHighlightClass } = useChangeHighlightClass('');\n  const [showProgress, toggleProgress] = useState(false);\n\n\n  const formattedMessages = messages.map((msg) => (\n    <Message\n      key={msg.id}\n      id={msg.id}\n      message={msg.message}\n      created={msg.created}\n      username={msg.user.username}\n      currentUser={currentUser}\n      isCurrent={msg.user.id === currentUser}\n      userId={msg.user.id}\n      deleteMessage={deleteMessage}\n      video={msg.video}\n      image={msg.image}\n    />\n  ));\n\n  // Changes the class depending on the event\n  // and tracks event\n  function boxEvent(e) {\n    changeHighlightClass(e.type);\n    preventDefaults(e);\n  }\n\n  function dropFile(e) {\n    preventDefaults(e);\n    toggleProgress(true);\n    changeHighlightClass(e.type);\n    handleDrop(e, channelId, 'chat', emitSendMessage);\n    setTimeout(() => {\n      toggleProgress(false);\n    }, 2000);\n  }\n\n\n  return (\n    <div\n      onDragEnter={boxEvent}\n      onDragLeave={boxEvent}\n      onDragOver={boxEvent}\n      onDrop={dropFile}\n    >\n      <ScrollToBottom\n        id=\"drop-area\"\n        className={`textContainer ${highlightClass}`}\n      >\n        {formattedMessages}\n      </ScrollToBottom>\n      {showProgress && <LinearProgress />}\n    </div>\n  );\n};\n\nexport default TextContainer;\n"]},"metadata":{},"sourceType":"module"}