(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{108:function(e,t,a){},11:function(e,t){e.exports={API_ENDPOINT:"https://arcane-bastion-72484.herokuapp.com/api",GOOGLE_CLIENT_ID:"70428371004-nsjuc02pvd1lj3iooo72ulc9e6qtpqod.apps.googleusercontent.com",GOOGLE_API_KEY:"AIzaSyBri0PKsTN8-kTlzAROVisAsALmAryij_A",serverURL:"https://arcane-bastion-72484.herokuapp.com"}},177:function(e,t,a){},185:function(e,t,a){},215:function(e,t,a){e.exports=a(463)},268:function(e,t){},423:function(e,t,a){},424:function(e,t,a){},425:function(e,t,a){},455:function(e,t,a){},456:function(e,t,a){},457:function(e,t,a){},461:function(e,t,a){},462:function(e,t,a){},463:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),i=(a(116),a(5)),l=a(7),s=a(36),u=a(40),m=a(493),d=a(500),h=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],o=a[1];return{type:e,onChange:function(e){o(e.target.value)},value:r,reset:function(){o("")}}},f=a(8),p=a.n(f),g=a(16),v=a(21),b=a.n(v),E=a(11),y=function(e){var t=e.error,a=e.token,n=e.username,r=e.guest,o=e.userID;return!t&&(window.localStorage.setItem("authorization",a),window.localStorage.setItem("username",n),window.localStorage.setItem("guest",r),window.localStorage.setItem("userID",o),!0)},O=function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(E.serverURL,"/api/auth/login"),t);case 2:return a=e.sent,e.abrupt("return",y(a.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j={register:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{authorization:window.localStorage.authorization}},e.next=3,b.a.post("".concat(E.serverURL,"/api/auth/register"),t,a);case 3:return n=e.sent,e.abrupt("return",y(n.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),guestLogin:function(){var e=Object(g.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(E.serverURL,"/api/auth/guest"),t);case 2:return a=e.sent,e.abrupt("return",y(a.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:O,setLocalStorage:y},S=function(e){var t=e.setState,a=h("text"),n=h("password"),o=function(e){e.preventDefault();var r={email:a.value,password:n.value};j.login(r).then((function(e){e&&t((function(e){return Object(i.a)({},e,{authorization:window.localStorage.getItem("authorization"),username:window.localStorage.getItem("username"),guest:window.localStorage.getItem("guest"),currentUser:window.localStorage.getItem("userID")})}))}))};return r.a.createElement("div",{className:"normalLogin"},r.a.createElement("form",null,r.a.createElement(d.a,Object.assign({placeholder:"email",label:"E-mail",variant:"outlined"},a,{reset:void 0,onKeyPress:function(e){return"Enter"===e.key?o(e):null}})),r.a.createElement(d.a,Object.assign({placeholder:"password",labal:"Password",variant:"outlined"},n,{reset:void 0,onKeyPress:function(e){return"Enter"===e.key?o(e):null}})),r.a.createElement(m.a,{variant:"outlined",type:"button",onClick:o},"Login")))},w=function(e){var t=e.setState,a=h("text"),n=function(){var e=Object(g.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r={username:a.value},j.guestLogin(r).then((function(e){e&&t((function(e){return Object(i.a)({},e,{authorization:window.localStorage.getItem("authorization"),username:window.localStorage.getItem("username"),currentUser:window.localStorage.getItem("userID"),guest:window.localStorage.getItem("guest")})}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"usernameLogin"},r.a.createElement("form",null,r.a.createElement(d.a,Object.assign({placeholder:"username",variant:"outlined",label:"Username"},a,{reset:void 0,onKeyPress:function(e){return"Enter"===e.key?n(e):null}})),r.a.createElement(m.a,{variant:"outlined",onClick:function(e){return n(e)}},"guest login")))},C=a(189),k=function(e){var t=e.setState;return r.a.createElement(C.GoogleLogin,{className:"googleLogin",clientId:E.GOOGLE_CLIENT_ID,buttonText:"Google Login",onSuccess:function(e){var a=e.accessToken,n={headers:{authorization:window.localStorage.authorization}};b.a.post("".concat(E.serverURL,"/api/auth/google"),{accessToken:a},n).then((function(e){var a=e.data,n=a.success,r=a.error,o=a.token,c=a.username,l=a.guest,s=a.userID;n?(j.setLocalStorage({token:o,username:c,guest:l,userID:s}),t((function(e){return Object(i.a)({},e,{authorization:window.localStorage.getItem("authorization"),username:window.localStorage.getItem("username"),guest:localStorage.getItem("guest"),currentUser:localStorage.getItem("userID")})}))):console.log(r)}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"})},N=function(e){var t=e.setState;return r.a.createElement("section",{className:"landingContainer"},r.a.createElement("div",{className:"landingPage"},r.a.createElement("h1",{id:"app-title"},"Franz"),r.a.createElement("p",{id:"slogan"},"Stay in touch, no matter where you are in the world."),r.a.createElement(w,{setState:t}),r.a.createElement(S,{setState:t}),r.a.createElement(k,{setState:t})))},x=a(13),I=a(190),L=a.n(I),M={getUserData:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{authorization:window.localStorage.authorization}},e.next=3,b.a.get("".concat(E.serverURL,"/api/channel/initialize"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getInvite:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{authorization:window.localStorage.authorization}},e.next=3,b.a.get("".concat(E.serverURL,"/api/channel/invite/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P={getLocation:function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.a.post("https://www.googleapis.com/geolocation/v1/geolocate?key=".concat(E.GOOGLE_API_KEY)).then((function(e){var a=e.data.location;t(a)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(){return r.a.createElement("div",{id:"noChannelPlaceholder"},r.a.createElement("h1",{className:"newChannelHeader"},"Create/join a channel to get started."))},z=a(492),U=a(496),B=a(494),A=a(495),T=a(501),V=a(192),F=a.n(V),R=function(e){var t=e.name,a=e.id,n=e.selectCurrentChannel;return r.a.createElement(s.b,{className:"channelLink",to:"/channel/".concat(a),onClick:function(){return n(a)}},r.a.createElement(B.a,{button:!0,onClick:function(){return n(a)}},r.a.createElement(A.a,null,r.a.createElement(T.a,null,r.a.createElement(F.a,null))),t.length<11?t:t.slice(0,11)+"..."))},G=function(e){var t=e.selectCurrentChannel,a=e.channelIdNamePair,n=e.toggleForm,o=a.map((function(e){var a=e.name,n=e.id;return r.a.createElement("div",{key:n},r.a.createElement("li",{className:"channelItems"},r.a.createElement(R,{key:n,name:a,id:n,selectCurrentChannel:t})),r.a.createElement(U.a,null))}));return r.a.createElement("div",{className:"leftBarUI"},r.a.createElement("div",{id:"leftBarTitle"},r.a.createElement("button",{type:"button",id:"create-channel",onClick:function(){return n(!0)}},"+ Create/Join a channel")),r.a.createElement("div",{className:"channelList"},r.a.createElement(z.a,null,o)))},_=a(193),K=a.n(_),J=a(18),Y=a(194),H=a.n(Y),X=a(497),W=a(195),q=a.n(W),$=a(27),Z=a(82),Q=a.n(Z),ee=function(e){var t=e.username,a=e.message,o=e.video,c=e.image,i=e.isCurrent,s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1];return r.a.createElement("div",null,r.a.createElement(Q.a,{toggler:m,sources:[a]}),r.a.createElement("article",{className:i?"full-message-me":"full-message"},r.a.createElement("div",{className:"chat-name"},r.a.createElement("span",null,t.length<25?t:t.slice(0,25)+"...")),r.a.createElement("div",{className:i?"message-content-me":"message-content"},c&&r.a.createElement($.CloudinaryContext,{cloudName:"jekmessaging"},r.a.createElement($.Image,{className:"message-media",publicId:a,width:"100%",onClick:function(){return d(!m)}})),o&&r.a.createElement($.CloudinaryContext,{cloudName:"jekmessaging"},r.a.createElement("video",{className:"message-media",width:"100%",onClick:function(){return d(!m)},controls:!0},r.a.createElement("source",{src:a,type:"video/webm"}),r.a.createElement("source",{src:a,type:"video/mp4"}),r.a.createElement("source",{src:a,type:"video/ogg"}))),!c&&!o&&q.a.emojify(a))))};a(423);var te=function(e){var t=e.messages,a=e.deleteMessage,o=e.channelId,c=e.emitSendMessage,i=e.currentUser,s=function(e){var t=Object(n.useState)(e),a=Object(l.a)(t,2),r=a[0],o=a[1];return{highlightClass:r,changeHighlightClass:function(e){o("dragenter"===e||"dragover"===e?"highlight":"")}}}(""),u=s.highlightClass,m=s.changeHighlightClass,d=Object(n.useState)(!1),h=Object(l.a)(d,2),f=h[0],v=h[1],b=function(e){e.preventDefault(),e.stopPropagation()},y=function(){var e=Object(g.a)(p.a.mark((function e(t,a,n,r,o){var c,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c="".concat(E.serverURL,"/api/photos/uploadPhotos"),(i=new FormData).append("file",t),i.append("channel","".concat(a)),l="albums/".concat(n.replace(/ /g,"-")),"chat"===n&&(l="chat"),i.append("album",l),fetch(c,{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){"chat"===n?r(e.result.url,e.video,e.image):setTimeout((function(){o()}),3e3)})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),O=function(e,t,a,n){b(e),function(e,t,a,n,r){Object(J.a)(e).forEach((function(e){y(e,t,a,n,r)}))}(e.dataTransfer.files,t,a,n)},j=t.map((function(e){return r.a.createElement(ee,{key:e.id,id:e.id,message:e.message,created:e.created,username:e.user.username,currentUser:i,isCurrent:e.user.id===i,userId:e.user.id,deleteMessage:a,video:e.video,image:e.image})}));function S(e){m(e.type),b(e)}return r.a.createElement("div",{onDragEnter:S,onDragLeave:S,onDragOver:S,onDrop:function(e){b(e),v(!0),m(e.type),O(e,o,"chat",c),setTimeout((function(){v(!1)}),2e3)}},r.a.createElement(H.a,{id:"drop-area",className:"textContainer ".concat(u)},j),f&&r.a.createElement(X.a,null))},ae=function(e){var t=e.message,a=e.setMessage,o=e.emitSendMessage,c=e.channel,i=e.setShowEmojiPicker,s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1],h=function(){var e=Object(g.a)(p.a.mark((function e(t,a,n,r,o){var c,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c="".concat(E.serverURL,"/api/photos/uploadPhotos"),(i=new FormData).append("file",t),i.append("channel","".concat(a)),l="albums/".concat(n.replace(/ /g,"-")),"chat"===n&&(l="chat"),i.append("album",l),fetch(c,{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){"chat"===n?r(e.result.url,e.video,e.image):setTimeout((function(){o()}),3e3)})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),f=function(e){d(!0),function(e,t,a,n,r){Object(J.a)(e).forEach((function(e){h(e,t,a,n,r)}))}(e.target.files,c,"chat",o),setTimeout((function(){d(!1)}),1e3)};return r.a.createElement("div",null,m&&r.a.createElement(X.a,null),r.a.createElement("form",{id:"messaging-input"},r.a.createElement("textarea",{className:"chatInputBox",type:"text",onChange:function(e){return a(e.target.value)},value:t,onKeyPress:function(e){return"Enter"===e.key?function(e){e.preventDefault(),d(!0),o(t),d(!1),a("")}(e):null},placeholder:"Type something to send..."}),r.a.createElement("div",{className:"emojiPickerButton",onClick:function(){return i((function(e){return!e}))}}),r.a.createElement("input",{type:"file",id:"fileElem",multiple:!0,accept:"image/*",onChange:function(e){return f(e)}}),r.a.createElement("label",{className:"button",htmlFor:"fileElem"})))},ne=a(50);function re(e){var t=e.channelId,a=e.emitSendMessage,o=e.albumName,c=e.newAlbum,s=e.viewAlbum,u=Object(n.useState)({album:o,files:[],originalName:o}),m=Object(l.a)(u,2),d=m[0],h=m[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),b=v[0],y=v[1],O=function(){var e=Object(g.a)(p.a.mark((function e(t,a,n,r,o){var c,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c="".concat(E.serverURL,"/api/photos/uploadPhotos"),(i=new FormData).append("file",t),i.append("channel","".concat(a)),l="albums/".concat(n.replace(/ /g,"-")),"chat"===n&&(l="chat"),i.append("album",l),fetch(c,{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){"chat"===n?r(e.result.url,e.video,e.image):setTimeout((function(){o()}),3e3)})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),j=function(e,t,a,n,r){Object(J.a)(e).forEach((function(e){O(e,t,a,n,r)}))};function S(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var a=document.createElement("img");"video/mp4"===e.type&&(a=document.createElement("video")),a.src=t.result,document.getElementById("input-display").appendChild(a)}}function w(e){if(e.preventDefault(),"album"===e.target.name){var t,a=e.target.value.replace(/ /g,"-");h(Object(i.a)({},d,(t={},Object(x.a)(t,e.target.name,a),Object(x.a)(t,"originalName",e.target.value),t)))}else Object(J.a)(e.target.files).forEach(S),h({album:d.album,files:[].concat(Object(J.a)(d.files),[e.target.files])})}function C(){var e=o.replace(/ /g,"-");console.log(e),s("".concat(t,"/albums/").concat(e),o)}function k(){s("albums")}function N(){return(N=Object(g.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(!0),n.preventDefault(),Object(J.a)(d.files).forEach((function(e){j(e,t,d.album,a,c?k:C),setTimeout((function(){y(!1)}),3e3)})),document.getElementById("album-upload-form").reset(),r="\ud83d\udea8A new album '".concat(d.album.replace(/-/g," "),"' has been uploaded\ud83d\udea8"),c?setTimeout((function(){return s("albums")}),3e3):r="\ud83d\udc40 New photos were added to ".concat(d.album),setTimeout((function(){return a(r,!1,!1)}),3e3);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,b&&r.a.createElement(X.a,null),c&&r.a.createElement("div",{className:"popup-title"},"New Album"),!c&&r.a.createElement("div",{className:"popup-title-mod"},"Adding photos to"," ",o),r.a.createElement("form",{id:"album-upload-form",onSubmit:function(e){return N.apply(this,arguments)}},c&&r.a.createElement("input",{id:"input-album",type:"text",name:"album",placeholder:"Choose an album name",onChange:w}),r.a.createElement("div",{id:"album-submission"},r.a.createElement("input",{className:"submit-button",type:"submit",value:"SUBMIT"})),r.a.createElement("div",{id:"input-display",value:"drag"},r.a.createElement("input",{id:"album-upload",name:"files",type:"file",multiple:!0,accept:"image/*",onChange:w}),r.a.createElement("div",{className:"subtitle"},"ADDED MEDIA:"))))}a(424),a(108);function oe(e){var t=e.url,a=e.fileType,n=e.showSlide,o=e.slide;return r.a.createElement($.CloudinaryContext,{cloudName:"jekmessaging"},r.a.createElement("div",{onClick:function(){return n(o)}},"image"===a&&r.a.createElement($.Image,{publicId:t,width:"100%"}),"video"===a&&r.a.createElement("video",{width:"100%",controls:!0},r.a.createElement("source",{src:t,type:"video/webm"}),r.a.createElement("source",{src:t,type:"video/mp4"}),r.a.createElement("source",{src:t,type:"video/ogg"}))))}a(177);function ce(e){var t=e.path,a=e.title,o=e.isAlbum,c=e.addPhotos,i=e.openLightboxOnSlide,s=e.changeLinks,u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],h=m[1];Object(n.useEffect)((function(){fetch("".concat(E.serverURL,"/api/photos/getChannelPhotos/").concat(t)).then((function(e){return e.json()})).then((function(e){return e.resources})).then((function(e){console.log("allPhotos:",e),h(e)}))}),[t]);var f=[],p=0;d.forEach((function(e){p+=1,f.push(r.a.createElement(oe,{key:e.public_id,publicKey:e.public_id,url:e.url,fileType:e.resource_type,showSlide:i,slide:p}))}));var g=[[],[],[],[]],v=0;return f.forEach((function(e){g[v].push(e),3===v?v=0:v+=1})),Object(n.useEffect)((function(){var e=d.map((function(e){return e.url}));s(e)}),[s,d]),r.a.createElement("div",null,r.a.createElement("div",{className:"popup-title"},a),o&&r.a.createElement("button",{type:"button",className:"adding-button-mod",onClick:function(){return c("addAlbumPhotos")}},r.a.createElement("span",null,"+")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},g[0]),r.a.createElement("div",{className:"column"},g[1]),r.a.createElement("div",{className:"column"},g[2]),r.a.createElement("div",{className:"column"},g[3])))}a(425);function ie(e){var t=e.name,a=e.path,o=e.viewAlbum,c=Object(n.useState)([]),i=Object(l.a)(c,2),s=i[0],u=i[1];return Object(n.useEffect)((function(){b.a.get("".concat(E.serverURL,"/api/photos/coverPhoto/").concat(a)).then((function(e){return u([e.data[0],e.data[1]])}))}),[a]),r.a.createElement("div",{className:"albumCover",onClick:function(){return o(a,t)}},r.a.createElement($.CloudinaryContext,{className:"coverPhoto",cloudName:"jekmessaging"},"image"===s[0]&&r.a.createElement($.Image,{publicId:s[1]}),"video"===s[0]&&r.a.createElement($.Video,{publicId:s[1],resourceType:"video"})),t)}function le(e){var t=e.change,a=e.channelId,o=e.viewAlbum,c=Object(n.useState)([]),i=Object(l.a)(c,2),s=i[0],u=i[1];Object(n.useEffect)((function(){b.a.get("".concat(E.serverURL,"/api/photos/getAlbums/").concat(a)).then((function(e){e.data.folders.forEach((function(e){u((function(t){return[].concat(Object(J.a)(t),[e])}))}))}))}),[a]);var m=s.map((function(e){return r.a.createElement(ie,{key:e.name,name:e.name.replace(/-/g," "),path:e.path,viewAlbum:o})}));return r.a.createElement("div",null,r.a.createElement("div",{className:"popup-title"},"Albums"),r.a.createElement("button",{className:"adding-button",onClick:function(){return t("albumForm")}},"+",r.a.createElement("span",null)),r.a.createElement("div",{id:"album-box"},m))}function se(e){var t=e.channelId,a=e.emitSendMessage,o=Object(n.useState)({toggler:!1,slide:0}),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],h=m[1],f=Object(n.useState)("chat"),p=Object(l.a)(f,2),g=p[0],v=p[1],b=Object(n.useState)("".concat(t,"/chat/false")),E=Object(l.a)(b,2),y=E[0],O=E[1],j=Object(n.useState)("Chat Photos"),S=Object(l.a)(j,2),w=S[0],C=S[1];function k(e){v(e)}function N(e,t){O(e),C(t),k("albumPhotos")}function x(e){s({toggler:!i.toggler,slide:e})}return r.a.createElement("div",null,r.a.createElement(Q.a,{toggler:i.toggler,sources:d,slide:i.slide,key:i.slide}),r.a.createElement("div",{className:"resize-box",onMouseDown:ne.mouseDownFunction},r.a.createElement("div",{id:"imageBox"},r.a.createElement("div",{className:"switch-buttons"},r.a.createElement("button",{type:"button",className:"image-buttons",onClick:function(){return O("".concat(t,"/chat/false")),C("Chat Photos"),void v("chat")}},"CHAT"),r.a.createElement("button",{type:"button",className:"image-buttons",onClick:function(){return k("albums")}},"ALBUMS")),"albumForm"===g&&r.a.createElement(re,{channelId:t,emitSendMessage:a,albumName:"",newAlbum:!0,viewAlbum:k}),"chat"===g&&r.a.createElement(ce,{path:y,title:w,isAlbum:!1,openLightboxOnSlide:x,addPhotos:k,changeLinks:h}),"albums"===g&&r.a.createElement(le,{change:k,channelId:t,viewAlbum:N}),"albumPhotos"===g&&r.a.createElement(ce,{path:y,title:w,isAlbum:!0,openLightboxOnSlide:x,addPhotos:k,changeLinks:h}),"addAlbumPhotos"===g&&r.a.createElement(re,{channelId:t,emitSendMessage:a,albumName:w,newAlbum:!1,viewAlbum:N}))))}var ue,me,de=a(196),he=a.n(de),fe={width:"100%",height:"100%",position:"relative"},pe={height:"45px",width:"55px",marginTop:"-50px"},ge={height:"100%"},ve=function(e){var t=e.title;return r.a.createElement("div",{style:pe},r.a.createElement("img",{style:ge,src:"https://res.cloudinary.com/og-tech/image/upload/s--OpSJXuvZ--/v1545236805/map-marker_hfipes.png",alt:t}),r.a.createElement("p",{className:"googleMapsMarkerLabel"},t))},be=function(e){return 1===Math.round(Math.random())?e+Math.random()/1e3:e-Math.random()/1e3},Ee=function(e){var t=e.locations,a=e.center,n=e.channel,o=t?t.map((function(e){return r.a.createElement(ve,{className:"googleMapsMarker",key:"".concat(n).concat(10*Math.random()),title:"".concat(e.username),lat:be(e.location.lat),lng:be(e.location.lng)})})):r.a.createElement(ve,Object.assign({title:"default location"},a));return r.a.createElement("div",{className:"resize-box",onMouseDown:ne.mouseDownFunction},r.a.createElement(he.a,{style:{mapStyles:fe},bootstrapURLKeys:{key:E.GOOGLE_API_KEY},center:a,zoom:14},o))},ye=a(197),Oe=function(e){var t=e.currentVideo,a=e.changeVideoState,o=e.paused,c=e.played,i=e.channel,l=e.syncVideo,s=e.timeStamp;Object(n.useEffect)((function(){o&&ue&&ue.b?ue.pauseVideo():c&&ue&&ue.b&&ue.playVideo()}),[o,c,t]),Object(n.useEffect)((function(){s&&ue&&ue.b&&Math.abs(ue.getCurrentTime()-s)>1&&ue.seekTo(s,!0)}),[s]);return r.a.createElement(ye.a,{id:"youtube-player",videoId:t,opts:{height:"520",width:"840",playerVars:{autoplay:1}},onReady:function(e){console.log("ready"),ue=e.target,s&&ue.b&&Math.abs(ue.getCurrentTime()-s)>1&&ue.seekTo(s,!0),l(ue.getCurrentTime(),i),o&&e.target.pauseVideo(),e.target.playVideo()},onStateChange:function(e){var n=e.data;l(ue.getCurrentTime(),i),1===n?a(t,i,!1,!0):2===n?a(t,i,!0,!1):-1===n&&e.target.playVideo()}})},je=(a(455),function(e){var t=e.channel,a=e.videoStates,o=e.changeVideoState,c=e.syncVideo,i=Object(n.useState)(""),s=Object(l.a)(i,2),u=s[0],m=s[1];return r.a.createElement("div",{className:"video-resize-box resize-box",onMouseDown:ne.mouseDownFunction},r.a.createElement("div",{id:"videoBox"},r.a.createElement("div",{id:"video"},r.a.createElement("form",{id:"changeVideoForm",onSubmit:function(e){return function(e){if(e.preventDefault(),u){var a,n=u.split("v=")[1],r=n.indexOf("&");-1!==r&&(n=n.substring(0,r)),(a=console).log.apply(a,["handleSubmit"].concat(Object(J.a)(n))),o(n,t,!1,!0)}}(e)}},r.a.createElement("input",{type:"text",placeholder:"Enter a video link and watch with friends...",name:"link",value:u,onChange:function(e){m(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement(Oe,{currentVideo:a[t].url,changeVideoState:o,paused:!!a[t]&&a[t].paused,played:!a[t]||a[t].played,timeStamp:a[t]?a[t].timeStamp:0,channel:t,syncVideo:c}))))}),Se=a(81),we=a(38),Ce=a(200),ke=a(201),Ne=a(22),xe=a(204),Ie=function(e){function t(e){var a;return Object(Se.a)(this,t),(a=Object(Ce.a)(this,Object(ke.a)(t).call(this,e))).isPainting=!1,a.userStrokeStyle="#EE92C2",a.guestStrokeStyle="#F0C987",a.line=[],a.prevPos={offsetX:0,offsetY:0},a.onMouseDown=a.onMouseDown.bind(Object(Ne.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(Ne.a)(a)),a.endPaintEvent=a.endPaintEvent.bind(Object(Ne.a)(a)),a.sendLine=e.sendLine.bind(Object(Ne.a)(a)),a}return Object(xe.a)(t,e),Object(we.a)(t,[{key:"componentDidMount",value:function(){this.canvas.width=700,this.canvas.height=459,this.ctx=this.canvas.getContext("2d"),this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.lineWidth=5}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props,a=t.currentUser,n=t.lines;void 0!==n&&Object.values(n).forEach((function(t){var n=t.user,r=t.line;n!==a&&r.forEach((function(t){e.paint(t.start,t.stop,e.guestStrokeStyle)}))}))}},{key:"onMouseDown",value:function(e){var t=e.nativeEvent,a=t.offsetX,n=t.offsetY;this.isPainting=!0,this.prevPos={offsetX:a,offsetY:n}}},{key:"onMouseMove",value:function(e){var t=e.nativeEvent;if(this.isPainting){var a={offsetX:t.offsetX,offsetY:t.offsetY},n={start:Object(i.a)({},this.prevPos),stop:Object(i.a)({},a)};this.line=this.line.concat(n),this.paint(this.prevPos,a,this.userStrokeStyle)}}},{key:"endPaintEvent",value:function(){this.isPainting&&(this.isPainting=!1,this.sendPaintData())}},{key:"paint",value:function(e,t,a){var n=t.offsetX,r=t.offsetY,o=e.offsetX,c=e.offsetY;this.ctx.beginPath(),this.ctx.strokeStyle=a,this.ctx.moveTo(o,c),this.ctx.lineTo(n,r),this.ctx.stroke(),this.prevPos={offsetX:n,offsetY:r}}},{key:"sendPaintData",value:function(){var e=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sendLine(this.line);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{ref:function(t){return e.canvas=t},style:{background:"black"},onMouseDown:this.onMouseDown,onMouseLeave:this.endPaintEvent,onMouseUp:this.endPaintEvent,onMouseMove:this.onMouseMove}))}}]),t}(n.Component),Le=a(20),Me=function(e){var t=e.setState,a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],s=o[1],u=h("text"),f=h("password"),p=function(){return s(!1)},g=function(e){e.preventDefault();var a={email:u.value,password:f.value};j.register(a).then((function(e){e&&t((function(e){return Object(i.a)({},e,{authorization:window.localStorage.getItem("authorization"),username:window.localStorage.getItem("username"),currentUser:window.localStorage.getItem("userID"),guest:localStorage.getItem("guest")})}))}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"guestRegisterBanner",role:"button",tabIndex:0,onKeyPress:function(e){return e.preventDefault()},onClick:function(e){return s(!0)}},r.a.createElement("p",{className:"bannerMessage"},"If you wish to save your username and chats the next time you visit, click here to create an account!")),r.a.createElement(Le.a,{show:c,onHide:p,className:"NewAccountModal"},r.a.createElement(Le.a.Header,{closeButton:!0},r.a.createElement(Le.a.Title,null)),r.a.createElement(Le.a.Body,{className:"NewAccountModalBody"},r.a.createElement("form",{className:"NewAccountRegistrationModalForm"},r.a.createElement("p",null,"Welcome! Claim your account to keep all your servers and chats even after you close the browser."),r.a.createElement("div",{className:"email"},r.a.createElement(d.a,Object.assign({name:"email",label:"email",placeholder:"email"},u,{reset:void 0,onKeyPress:function(e){return"Enter"===e.key?g(e):null},variant:"outlined",className:"NewAccountModalInput"}))),r.a.createElement("div",{className:"password"},r.a.createElement(d.a,Object.assign({name:"password",label:"password",placeholder:"password"},f,{reset:void 0,onKeyPress:function(e){return"Enter"===e.key?g(e):null},variant:"outlined",className:"NewAccountModalInput"})))),r.a.createElement("div",{className:"guestRegisterModalButtons"},r.a.createElement(m.a,{className:"guestRegisterModalCloseButton",onClick:p},"Close"),r.a.createElement(m.a,{variant:"primary",onClick:g},"Register"))),r.a.createElement(Le.a.Footer,{className:"modalFooter"},r.a.createElement("div",{className:"modalDivider"},r.a.createElement("p",null," ------------- Login With Google ------------- ")),r.a.createElement("div",{className:"guestModalGoogleLoginButton"},r.a.createElement(k,{className:"googleLogin",setState:t})))))},Pe=(a(456),a(457),function(e){var t=e.messages,a=e.emitDeleteMessage,o=e.emitSendMessage,c=e.channel,i=e.currentUser,s=e.moduleView,u=e.locations,m=e.center,d=e.videoStates,h=e.changeVideoState,f=e.syncVideo,p=e.sendLine,g=e.lines,v=Object(n.useState)(!1),b=Object(l.a)(v,2),E=b[0],y=b[1],O=Object(n.useState)(""),j=Object(l.a)(O,2),S=j[0],w=j[1];return r.a.createElement("div",{id:"chat-container"},r.a.createElement(te,{messages:t,emitDeleteMessage:a,emitSendMessage:o,channelId:c,currentUser:i}),r.a.createElement(ae,{setShowEmojiPicker:y,emitSendMessage:o,channel:c,message:S,setMessage:w}),s.imageBox&&r.a.createElement(se,{channelId:c,emitSendMessage:o}),s.stalkerMap&&r.a.createElement(Ee,{locations:u,channel:c,center:m}),s.video&&r.a.createElement(je,{channel:c,videoStates:d,changeVideoState:h,viewState:s.video,syncVideo:f}),s.canvasBox&&r.a.createElement("div",{className:"canvas resize-box"},r.a.createElement("div",{style:{display:"flex"},className:"main"},r.a.createElement("div",{className:"left-guide"}),r.a.createElement(Ie,{className:"canvasBoard",sendLine:p,lines:g,currentUser:i}),r.a.createElement("div",{className:"right-guide"}))),E&&r.a.createElement("div",{className:"emojiPicker"},r.a.createElement(K.a,{onEmojiClick:function(e,t){e.preventDefault(),w((function(e){return e.concat(t.emoji)}))}})))}),De=a(203),ze=a(83),Ue=function(e){var t=e.channel,a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)({ready:!1,link:""}),u=Object(l.a)(s,2),m=u[0],h=u[1],f=function(){return i(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ze.a,{className:"inviteLinkModalButton",variant:"primary",onClick:function(){M.getInvite(t).then((function(e){var t=e.channelID;return h({ready:!0,link:t})})).then((function(){i(!0)}))}},"Create Invite Link"),r.a.createElement(Le.a,{className:"inviteLinkModalContainer",show:c,onHide:f},r.a.createElement(Le.a.Header,{closeButton:!0},r.a.createElement(Le.a.Title,null,"Invite Link")),r.a.createElement(Le.a.Body,null,r.a.createElement("div",{className:"invitePopup"},r.a.createElement(d.a,{defaultValue:m.link}),r.a.createElement(De.CopyToClipboard,{text:m.link},r.a.createElement(ze.a,{type:"button"},"Copy to clipboard!")))),r.a.createElement(Le.a.Footer,null,r.a.createElement(ze.a,{variant:"secondary",onClick:f},"Close"))))},Be=a(6),Ae=a(499),Te=a(498),Ve=Object(Be.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(Te.a),Fe=Object(Be.a)((function(e){return{badge:{backgroundColor:"gray",color:"#f7f7f7",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(Te.a),Re=Object(Ae.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}}}})),Ge=function(e){var t=e.name,a=e.online,n=Re();return r.a.createElement(B.a,null,r.a.createElement(A.a,null,r.a.createElement("div",{className:n.root},a?r.a.createElement(Ve,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(T.a,{alt:t})):r.a.createElement(Fe,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(T.a,{alt:t})))),r.a.createElement("p",{className:"userNameItem"},t.length<8?t:"".concat(t.slice(0,8),"...")))},_e=function(e){var t=e.userStatus;console.log(t);var a=t?t.map((function(e){var t=e.username,a=e.id,n=e.online;return console.log(t,a,n),r.a.createElement("div",{key:"".concat(a),className:"userItems"},a?r.a.createElement("div",null,r.a.createElement(Ge,{name:t,online:n}),r.a.createElement(U.a,null)):r.a.createElement("div",null))})):r.a.createElement("p",null,"Loading...");return r.a.createElement("div",{className:"userListContainer"},r.a.createElement("p",{className:"onlineUsers"},"Online Users"),r.a.createElement("div",{className:"userList"},r.a.createElement(z.a,null,a)))},Ke=function(e){var t=e.userList,a=e.userStatus,n=e.changeView;return r.a.createElement("div",{className:"rightBarUI"},r.a.createElement("div",{className:"widgetList"},r.a.createElement("button",{type:"button","aria-label":"stalker",id:"stalkerMapButton",onClick:function(){n((function(e){return{imageBox:!1,stalkerMap:!e.stalkerMap,video:!1,canvasBox:!1}}))}}),r.a.createElement("button",{type:"button","aria-label":"gallery",id:"photoGalleryButton",onClick:function(){n((function(e){return{stalkerMap:!1,imageBox:!e.imageBox,video:!1,canvasBox:!1}}))}}),r.a.createElement("button",{type:"button","aria-label":"video",id:"videoSyncButton",onClick:function(){n((function(e){return{stalkerMap:!1,imageBox:!1,video:!e.video,canvasBox:!1}}))}}),r.a.createElement("button",{type:"button","aria-label":"canvas",id:"photoCanvasButton",onClick:function(){n((function(e){return{stalkerMap:!1,imageBox:!1,video:!1,canvasBox:!e.canvasBox}}))}})),r.a.createElement("hr",null),r.a.createElement(_e,{userList:t,userStatus:a}))},Je=(a(461),function(e){var t=e.channel,a=e.userList,o=e.userStatus,c=e.name,i=e.messages,s=e.emitSendMessage,u=e.emitDeleteMessage,m=e.locations,d=e.center,h=e.currentUser,f=e.changeVideoState,p=e.videoStates,g=e.syncVideo,v=e.sendLine,b=e.lines,E=Object(n.useState)({stalkerMap:!1,imageBox:!1,video:!1,canvasBox:!1}),y=Object(l.a)(E,2),O=y[0],j=y[1];return r.a.createElement("div",{id:"channel"},r.a.createElement("div",{id:"channelName"},c),r.a.createElement(Ue,{channel:t}),r.a.createElement("div",{id:"chat-righUi"},r.a.createElement(Pe,{messages:i,emitSendMessage:s,emitDeleteMessage:u,channel:t,currentUser:h,moduleView:O,locations:m,center:d,videoStates:p,changeVideoState:f,syncVideo:g,sendLine:v,lines:b}),r.a.createElement(Ke,{changeView:j,userList:a,userStatus:o})))}),Ye=function(e){var t=e.emitCreateChannel,a=e.emitJoinChannel,n=e.show,o=e.toggleForm,c=h("text"),i=h("text"),l=function(){return o(!1)},s=function(){var e=Object(g.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(c.value),c.reset(),l();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){e.preventDefault(),a(i.value),i.reset(),l()};return r.a.createElement(Le.a,{className:"newChannelModal",show:n,onHide:l},r.a.createElement(Le.a.Header,{closeButton:!0},r.a.createElement(Le.a.Title,null,"New Channel")),r.a.createElement(Le.a.Body,null,r.a.createElement("div",{className:"seperate"},r.a.createElement("form",{className:"createChannelForm"},r.a.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"rgb(60, 163, 116)",margin:"0"}},"CREATE"),r.a.createElement("p",{style:{textAlign:"center",fontSize:"12px"}},"Create a new server and invite your friends!"),r.a.createElement("div",{className:"createChannelImageContainer"},r.a.createElement("div",{className:"joinChannelImage"})),r.a.createElement("input",Object.assign({},c,{reset:void 0,placeholder:"Channel Name",onKeyPress:function(e){return"Enter"===e.key?s(e):null}})),r.a.createElement("button",{className:"createChannelButton",type:"button",onClick:function(e){return s(e)}},"Create")),r.a.createElement("div",{className:"divider"}),r.a.createElement("form",{className:"joinChannelForm"},r.a.createElement("p",{style:{textAlign:"center",fontSize:"20px",color:"rgb(114, 137, 218)",margin:"0"}},"JOIN"),r.a.createElement("p",{style:{textAlign:"center",fontSize:"12px"}},"Enter an invite and join your friends server!"),r.a.createElement("div",{className:"createChannelImageContainer"},r.a.createElement("div",{className:"createChannelImage"})),r.a.createElement("input",Object.assign({},i,{reset:void 0,placeholder:"Channel Link",onKeyPress:function(e){return"Enter"===e.key?u(e):null}})),r.a.createElement("button",{className:"joinChannelButton",type:"button",onClick:function(e){return u(e)}},"Join")))),r.a.createElement(Le.a.Footer,null))},He=(a(462),a(185),function(e){var t=e.state,a=e.setState,o=function(e,t,a){var n=function(t){var n={channel:t,location:e.center,authorization:e.authorization};a.emit("update maps",n)};return{emitSendMessage:function(n,r,o){var c=e.currentChannel,l={message:n,channelID:c,authorization:e.authorization,username:e.username,video:r,image:o};a.emit("message",l,(function(e){t((function(t){return Object(i.a)({},t,{channelStates:Object(i.a)({},t.channelStates,Object(x.a)({},c,Object(i.a)({},t.channelStates[c],{messages:t.channelStates[c].messages.concat(e)})))})}))}))},emitJoinChannel:function(r){var o={channelLink:r,authorization:e.authorization};a.emit("join channel",o,(function(e){var a=e.error,r=e.data,o=e.messages;if(!a){var c=r.channel;n(c),t((function(e){return Object(i.a)({},e,{videoStates:Object(i.a)({},e.videoStates,Object(x.a)({},c,{url:"5mGuCdlCcNM"})),channelStates:Object(i.a)({},e.channelStates,Object(x.a)({},c,Object(i.a)({},r,{messages:o})))})}))}}))},emitCreateChannel:function(r){var o={channelName:r,authorization:e.authorization};a.emit("create channel",o,(function(e){var a=e.data,r=e.messages,o=a.channel,c={channelId:"".concat(o,"/chat"),albumName:!1};b.a.post("".concat(E.serverURL,"/api/photos/createEmptyFolder"),{body:JSON.stringify(c)}),n(o),t((function(e){return Object(i.a)({},e,{videoStates:Object(i.a)({},e.videoStates,Object(x.a)({},o,{url:"5mGuCdlCcNM"})),channelStates:Object(i.a)({},e.channelStates,Object(x.a)({},o,Object(i.a)({},a,{messages:r})))})}))}))}}}(t,a,me),c=o.emitSendMessage,l=o.emitJoinChannel,m=o.emitCreateChannel,d=function(e,t,a){return{changeVideoState:function(n,r,o,c){if(a){var l={url:n,paused:o,played:c,channel:r,authorization:e.authorization};t((function(e){return Object(i.a)({},e,{videoStates:Object(i.a)({},e.videoStates,Object(x.a)({},r,{url:n,paused:o,played:c}))})})),a.emit("change video state",l)}},syncVideo:function(t,n){if(a){var r={time:t,channel:n,authorization:e.authorization};a.emit("change video time",r)}}}}(t,a,me),h=d.changeVideoState,f=d.syncVideo,p=function(e){var n={line:e,channel:t.currentChannel,user:t.currentUser};a((function(a){return Object(i.a)({},a,{lines:Object(i.a)({},a.lines,Object(x.a)({},t.currentChannel,Object(i.a)({},a.lines[t.currentChannel],Object(x.a)({},t.currentUser,{user:t.currentUser,line:e}))))})})),me.emit("draw",n)},g=function(e){var n={location:e,authorization:t.authorization};me.emit("update location",n,(function(t){a((function(a){return Object(i.a)({},a,{locations:t,center:e})}))}))},v=Object.keys(t.channelStates),y=v.map((function(e){return{id:e,name:t.channelStates[e].name}})),O=function(e){a((function(t){return Object(i.a)({},t,{newChannelForm:e})}))},j=v.map((function(e){var a=t.channelStates[e],n=a.name,o=a.messages,i=a.users;return r.a.createElement(u.b,{path:"/channel/".concat(e),key:"".concat(e)},r.a.createElement(Je,{channel:e,name:n,messages:o,userStatus:t.users[e],userList:i,emitSendMessage:c,locations:t.locations[e],center:t.center,currentUser:t.currentUser,videoStates:t.videoStates,changeVideoState:h,syncVideo:f,sendLine:p,lines:t.lines[e]}))}));return Object(n.useEffect)((function(){t.authorization&&M.getUserData().then((function(e){var t=e.channelData,n=t.reduce((function(e,t){return e[t.data.channel]||(e[t.data.channel]={users:t.data.users,name:t.data.name,channel:t.data.channel,messages:t.messages}),e}),{}),r=t.reduce((function(e,t){return e[t.data.channel]={url:"5mGuCdlCcNM",played:!1,paused:!0},e}),{});a((function(e){return Object(i.a)({},e,{channelStates:n,videoStates:r,currentChannel:Object.keys(n)[0]})}))})),(me=L()("".concat(E.serverURL,"/"))).on("connect",(function(){me.on("server message",(function(e){console.log(e)})),me.emit("join channels",{authorization:t.authorization},(function(e){console.log(e)}))}))}),[]),Object(n.useEffect)((function(){t.currentChannelLoaded?a((function(e){return Object(i.a)({},e,{loaded:!0})})):a((function(e){return Object(i.a)({},e,{currentChannelLoaded:!0})}))}),[t.currentChannel]),Object(n.useEffect)((function(){return P.getLocation(g),navigator.geolocation&&navigator.geolocation.watchPosition((function(){P.getLocation(g)})),me.on("new message",(function(e){var t=e.channelID,n=e.newMessageObj;t&&n&&a((function(e){return Object(i.a)({},e,{channelStates:Object(i.a)({},e.channelStates,Object(x.a)({},t,Object(i.a)({},e.channelStates[t],{messages:e.channelStates[t].messages.concat(n)})))})}))})),me.on("user status",(function(e){var t=e.userStatus,n=t.channel,r=t.users;console.log(r,n),a((function(e){return Object(i.a)({},e,{users:Object(i.a)({},e.users,Object(x.a)({},n,r))})}))})),me.on("update location",(function(e){e&&a((function(t){return Object(i.a)({},t,{locations:Object(i.a)({},t.locations,{},e)})}))})),me.on("new video state",(function(e){var t=e.url,n=e.paused,r=e.played,o=e.channel;t&&a((function(e){return Object(i.a)({},e,{videoStates:Object(i.a)({},e.videoStates,Object(x.a)({},o,{url:t,paused:n,played:r}))})}))})),me.on("new time stamp",(function(e){var t=e.time,n=e.channel;a((function(e){return Object(i.a)({},e,{videoStates:Object(i.a)({},e.videoStates,Object(x.a)({},n,Object(i.a)({},e.videoStates[n],{timeStamp:t})))})}))})),me.on("draw",(function(e){var t=e.user,n=e.channel,r=e.line;a((function(e){return Object(i.a)({},e,{lines:Object(i.a)({},e.lines,Object(x.a)({},n,Object(i.a)({},e.lines[n],Object(x.a)({},t,{user:t,line:r}))))})}))})),function(){me.off()}}),[]),r.a.createElement("div",{id:"main-container"},r.a.createElement(s.a,null,r.a.createElement(G,{selectCurrentChannel:function(e){a((function(t){return Object(i.a)({},t,{currentChannel:e})}))},channelIdNamePair:y,emitJoinChannel:l,emitCreateChannel:m,toggleForm:O}),r.a.createElement(u.d,null,j),t.loaded&&!t.currentChannel&&r.a.createElement(D,{emitCreateChannel:m,emitJoinChannel:l}),r.a.createElement(Ye,{show:t.newChannelForm,toggleForm:O,emitCreateChannel:m,emitJoinChannel:l}),r.a.createElement(u.a,{exact:!0,from:"/home",to:t.currentChannel?"/channel/".concat(t.currentChannel):"/home"})))}),Xe=function(e){var t=e.state,a=e.setState,n=e.logOut;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navLogout"},r.a.createElement("div",{className:"username"},t.username&&r.a.createElement("i",{className:"fas fa-user-circle"}),r.a.createElement("span",{className:"usernameText"},t.username)),"true"===t.guest?r.a.createElement(Me,{setState:a}):null,t.authorization?r.a.createElement(s.b,{className:"logoutButton",to:"/",onClick:n}," Logout "):null))},We=function(){var e=Object(n.useState)({guest:!0,currentUser:"",currentChannel:"",authorization:"",username:"",channelStates:{},locations:{},center:{},users:{},videoStates:{},loaded:!1,currentChannelLoaded:!1,newChannelForm:!1,lines:{}}),t=Object(l.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){o((function(e){return Object(i.a)({},e,{authorization:window.localStorage.getItem("authorization"),username:window.localStorage.getItem("username"),guest:window.localStorage.getItem("guest"),currentUser:window.localStorage.getItem("userID")})}))}),[]),r.a.createElement("div",{id:"app"},r.a.createElement(s.a,null,r.a.createElement(Xe,{logOut:function(){window.localStorage.clear(),o({guest:!0,currentUser:"",currentChannel:"",authorization:"",username:"",channelStates:{},locations:{},center:{},users:{},videoStates:{},loaded:!1,currentChannelLoaded:!1,newChannelForm:!1,lines:{}})},state:a,setState:o}),r.a.createElement(u.b,{exact:!0,path:"/",render:function(){return a.authorization?r.a.createElement(u.a,{to:"/home"}):r.a.createElement(N,{setState:o})}}),r.a.createElement(u.b,{exact:!0,from:"/home",render:function(){return a.authorization?r.a.createElement(He,{state:a,setState:o}):r.a.createElement(u.a,{to:"/"})}})))};c.a.render(r.a.createElement(We,null),document.getElementById("root"))},50:function(e,t){var a,n,r;function o(e){e.preventDefault();var t=a-e.y;a=e.y,n.style.height="".concat(parseInt(getComputedStyle(n,"").height)-t,"px")}document.addEventListener("mouseup",(function(){document.removeEventListener("mousemove",o,!1)}),!1),e.exports={mouseDownFunction:function(e){n=e.target,r=parseInt(getComputedStyle(n,"").height)-15,e.nativeEvent.offsetY>=r&&(a=e.y,document.addEventListener("mousemove",o,!1))}}}},[[215,1,2]]]);
//# sourceMappingURL=main.52c6825c.chunk.js.map